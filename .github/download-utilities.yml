versions:
  uv: 0.10.7
  yq: 4.52.4
checksums:
  uv:
    unknown-linux-gnu:
      x86_64: 3b9d43bace955a409eb6f012b0932a4935534bdb54b85b9fd696cabbb15979a0
      aarch64: ad4f54ea470da62875ba5c45d4bd8e0bd0271989c68ce3335bbea26a5a6706e8
    apple-darwin:
      aarch64: e7a5bf88df262cdf04ee035ac75dc91b753316dab29730ab4c08e03c40d11c7e
      x86_64: 9ce2a8d60b251ef51f3469ba80ac362f6dcf5a25f6871024385e2c6aa13e201f
  yq:
    darwin:
      arm64: 6bfa43a439936644d63c70308832390c8838290d064970eaada216219c218a13
      amd64: d72a75fe9953c707d395f653d90095b133675ddd61aa738e1ac9a73c6c05e8be
    linux:
      arm64: 4c2cc022a129be5cc1187959bb4b09bebc7fb543c5837b93001c68f97ce39a5d
      amd64: 0c4d965ea944b64b8fddaf7f27779ee3034e5693263786506ccd1c120f184e8c

defaults: &defaults
  dest: /usr/local/bin
  perm: '0755'
  update: |
    owner="$(awk -F/ '{print $4"/"$5}' <<< "${download}")"
    export download=https://github.com/"${owner}"/releases/latest
    eval "${default_download_head}" |
    awk '$1 ~ /[Ll]ocation:/ { gsub(".*/[^0-9.]*", "", $0); print;exit}'

utility:
  uv:
    <<: *defaults
    # uv uses different naming: x86_64/aarch64 and unknown-linux-gnu/apple-darwin
    os:
      Linux: unknown-linux-gnu
      Darwin: apple-darwin
    arch:
      Darwin:
        arm64: aarch64
    download: https://github.com/astral-sh/uv/releases/download/${version}/uv-${arch}-${os}.tar.gz
    extract: tar -xzC ${dest}/ --no-same-owner --strip-components=1 uv-${arch}-${os}/uv
  yq:
    <<: *defaults
    os:
      Linux: linux
      Darwin: darwin
    arch:
      x86_64: amd64
      aarch64: arm64
      Darwin:
        i386: amd64
    download: https://github.com/mikefarah/yq/releases/download/v${version}/yq_${os}_${arch}
